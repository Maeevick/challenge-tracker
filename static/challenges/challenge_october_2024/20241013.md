---
date: 2024-10-13
impressions: 3763
reactions: 35
comments: 6
shares: 0
followers: 17
tags: NodeJS CyberSecurity OctoberChallenge
---

# ğŸš¨ Ne donne pas le clavier aux hackers qui t'attendent au tournant !!! ArrÃªte de retourner des stacktraces en prod, bo\*\*el !

Avec quelques annÃ©es au compteur maintenant, j'en ai vu passer des erreurs serveur, cÃ´tÃ© navigateur (certaines de moi-mÃªme).
Un truc qu'on nÃ©glige trop souvent, qui pourtant est une invitation pour n'importe quel curieux, c'est de dÃ©voiler les dÃ©tails de nos erreurs serveurs.

En particulier les stacktraces !

## ğŸ Tu offres sur un plateau :

1ï¸âƒ£ La structure des fichiers de ton app, voire d'une partie de ton infra.
2ï¸âƒ£ La composition de ta stack notamment tes libs et frameworks.
3ï¸âƒ£ Le flow de traitement et d'information de ton application.
Et sÃ»rement plein d'autres choses encore.

Pour Ã§a, Express (pour prendre un composant connu de l'environnement Node) dans son error handler par defaut a mis en place un switch sur la variable d'environement NODE_ENV :

- en dev, la stacktrace est retournÃ©e avec l'erreur.
- en prod, pas de stacktrace.

Mais, ce 'default error handler' n'est utilisÃ© que s'il n'y a pas un 'custom error handler' plus haut dans la pile de middleware ou si l'erreur n'est pas catchÃ©e.

Et lÃ , le retour de ton API ne dÃ©pend que de toi et si tu y inclus l'intÃ©gralitÃ© de l'erreur...

ğŸ‘¿ Le client y a accÃ¨s.

Ma rule of thumb maintenant : "En prod, des erreurs qui ont du sens oui, des erreurs user-friendly oui mais des stacktraces non !"

Log-les, monitore-les, analyse-les mais ne tends pas le bÃ¢ton pour te faire battre.

Une fois, il y a fort longtemps, j'ai reÃ§u un mail d'un "gentil White Hat" Ã§a fait tout drÃ´le... Ã‡a t'est dÃ©jÃ  arrivÃ© ?

---

Tu me dÃ©couvres ou me redÃ©couvres avec ce post ?

ğŸ› ï¸ Pendant tout le mois d'octobre, je publie un post par jour autour de NodeJS, TypeScript et d'Architecture Logicielle.

#NodeJS #CyberSecurity #OctoberChallenge

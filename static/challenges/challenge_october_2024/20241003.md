---
date: 2024-10-03
impressions: 4108
reactions: 62
comments: 14
shares: 2
followers: 50
tags: HexagonalArchitecture, AdapterPattern, DependencyInjection, OctoberChallenge
---

# üõë Stop ! Hexagonal Architecture : on ajoute du code et on fait des trucs √† l'envers pour un r√©sultat plus simple et efficace !

On va ajouter pour simplifier.
Contre-intuitif ? Totalement.
Efficace ? Absolument.

‚ò¢Ô∏è Quand je dis "on ajoute du code", ce n'est pas pour ajouter des "if else for while" partout ou des commentaires en veux-tu en voil√†, qu'on se le dise.

‚ò£Ô∏è Quand je dis "on fait les choses √† l'envers", ce n'est pas pour faire les choses √† l'arrache, qu'on s'entende bien.

Mais, il n'y a rien de pire que d'avoir de la pollution technique dans le c≈ìur m√©tier de l'app ou bien d'avoir la logique business √©clat√©e n'importe o√π entre l'API et la DB.

Et, il n'y a pas mieux pour perdre du temps et de l'argent que de devoir r√©√©crire des r√®gles m√©tiers √† chaque fois qu'on change une librairie, un service 3rd party, voire de framework ou de base de donn√©es.

√áa fait plus de 20 ans qu'Alistair Cockburn a pr√©sent√© et √©crit le pattern 'Port and Adapters' a.k.a. 'Hexagonal Architecture' (article en commentaire)... et pourtant...

## Dans le concret :

- 1Ô∏è‚É£ : D√©finir ce qui est essentiel √† ton activit√© et ce qui ne l'est pas. Ca d√©pend de ton contexte et de ton business mais une heuristique que j'utilise : si je devais faire la m√™me chose avec un papier et un crayon qu'avec une app, qu'est-ce qui ne changerait pas ?

- üëâ Exemple : pour vendre un produit, j'ai besoin de recevoir la commande, v√©rifier que tout est ok pour le client, le stock, attendre le paiement, pr√©parer la commande, l'exp√©dier, et envoyer la confirmation et la facture. - Ici, que j'utilise une solution num√©rique ou physique, √ßa reste les m√™mes √©tapes. - Par contre, qu'on communique par API ou t√©l√©phone, que j'ai une base de donn√©e Postgres ou Mongo, que j'utilise Stripe ou Mangopay, MailJet ou SendGrid, √ßa d√©pend de l'environnement.

- 2Ô∏è‚É£ : D√©finir mes fronti√®res ('ports') le contrat que mon 'application' va imposer √† son 'environnement' pour fonctionner (tu vas utiliser des 'types' ou des 'interfaces', selon ton degr√© de OOP).- En entr√©e, ton application va imposer √† ses 'clients' (les primary/left/driving adapters) le format de donn√©es qu'elle accepte de recevoir. - De l'autre c√¥t√©, ton application impose le contrat aux dependances (secondary/right/driven adapters) elle accepte de recevoir en injection de d√©pendance.

- üëâ Exemple: C'est au repository d'impl√©menter les methodes impos√©es par le coeur de l'application et non pas √† l'application de s'adapter aux m√©thodes propos√©es par l'ORM.C'est l√† qu'on retrouve le Design Pattern Adapter (ref en commentaire).

Je n'ai d√©j√† plus de place sur le post, donc je m'arr√™te l√†.

‚ù§Ô∏è Si tu as besoin ou que tu veux un format plus long :

- like- commente "hexa"
- follow / connect

---

Tu me d√©couvres ou me red√©couvres avec ce post ?

üõ†Ô∏è Pendant tout le mois d'octobre, je publie un post par jour autour de NodeJS, de TypeScript et d'Architecture Logicielle.

#HexagonalArchitecture #AdapterPattern #DependencyInjection #OctoberChallenge

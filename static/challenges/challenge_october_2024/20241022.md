---
date: 2024-10-22
impressions: 0
reactions: 0
comments: 0
shares: 0
followers: 0
tags: Refactoring SoftwareArchitecture OctoberChallenge
---

# Ton test unitaire antisocial te fait perdre ton sang-froid ? Essaie Ã§a ğŸ‘‡

Tu te faciliteras la vie et tu amÃ©lioreras la qualitÃ© de tes tests au passage.

âš ï¸ Tu tomberas toujours sur quelqu'un pour te dire : test unitaire = une fonction ou une classe / mÃ©thode.

Dis "oui oui", et oublie cette dÃ©finition (elle n'est pas fausse mais elle n'est pas juste non plus).

## ğŸ¤ C'est la diffÃ©rence que Martin Fowler fait entre tests solitaires et tests sociaux (lien en commentaire).

Bref.

## ğŸ¤“ Imaginons un cas, pas si rare : un produit dont le code est "bien" couvert par des tests unitaires solitaires.

Les comportements sont OK mais c'est un gouffre temporel Ã  chaque Ã©volution.
Autrement dit, l'Ã©quipe n'avance plus Ã  cause des tests (comme aiment le dire certains).

ğŸ› ï¸ Alors, que faire ?

â€¢ 1ï¸âƒ£ Repars du besoin et du cas d'usage : identifie le comportement attendu.

â€¢ 2ï¸âƒ£ CrÃ©e un nouveau test qui cherche Ã  vÃ©rifier ce comportement (et non les dÃ©tails d'implÃ©mentation).

â€¢ 3ï¸âƒ£ CrÃ©e un wrapper (fonction ou classe) qui va embarquer le code existant (testÃ© en solitaire).

â€¢ 4ï¸âƒ£ Assure-toi que tous les tests (nouveau et anciens) passent.

â€¢ ğŸ” Recommence jusqu'Ã  avoir couvert tous les cas historiquement testÃ©s.

â€¢ 5ï¸âƒ£ Supprime tes anciens tests solitaires et rigides.

â€¢ 6ï¸âƒ£ Refacto tes wrappers en profitant de la sÃ©curitÃ© de tes tests sociaux.

Fais Ã©voluer la codebase petit Ã  petit au fil des besoins d'Ã©volutions et travaille main dans la main avec celle ou celui qui exprime le besoin mÃ©tier/user.

### ğŸ‘‰ Si tu as des critÃ¨res d'acceptation clairs c'est 50% du boulot de fait.

Partage tes propres tricks en commentaire qu'on progresse tous ensemble.

---

Tu me dÃ©couvres ou me redÃ©couvres avec ce post ?

ğŸ› ï¸ Pendant tout le mois d'octobre, je publie un post par jour autour de NodeJS, TypeScript et d'Architecture Logicielle.

#Refactoring #SoftwareArchitecture #OctoberChallenge

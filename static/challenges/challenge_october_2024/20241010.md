---
date: 2024-10-10
impressions: 2965
reactions: 33
comments: 4
shares: 0
followers: 8
tags: NodeJS TypeScript OctoberChallenge
---

# ğŸ” SRP par-ci, SRP par-lÃ , il y a plein de bons conseils sur LinkedIn mais peu de code alors Ã  quoi Ã§a ressemble ?

Et si tu n'Ã©tais pas encore tombÃ© dessus, bah... C'est fait.

## ğŸ“š La dÃ©finition "officielle" du Single Responsibility Principle de Robert C. Martin dans "Design Principles and Design Patterns" en 2000 :

"Une classe ne devrait avoir qu'une seule raison de changer."

### ğŸ¤• Hum... Une seule raison de changer d'accord, mais comment dÃ©finir la granularitÃ© de cette raison ?

Attention, la phrase suivante va te faire mal au cerveau.

Une responsabilitÃ© est une raison de changer si elle peut Ãªtre modifiÃ©e indÃ©pendamment des autres aspects du systÃ¨me sans affecter leur fonctionnement.

---

## ğŸ” Rien ne vaut un exemple concret, alors regardons dans le code des illustrations,

1ï¸âƒ£ Dans le premier cas (non SRP), 'processOrder' est modifiÃ©e si :

- la logique des stocks change,
- le calcul du total change,
- le paiement change,
- la mise Ã  jour du stock change,
- le format de la commande change,
- l'envoi de mail change.

2ï¸âƒ£ Dans l'autre cas (SRP), 'processOrder' change uniquement si

- le flux de traitement (l'orchestration) change.

C'est plus clair Ã  prÃ©sent ?

---

## ğŸ‘® 3 questions pour vÃ©rifier si ton code respecte le SRP :

1ï¸âƒ£ Peux-tu dÃ©crire la responsabilitÃ© de ta classe/module/fonction en une phrase sans utiliser "et" ou "ou" ? Si oui, nomme-la ainsi.

2ï¸âƒ£ Si tu changes une fonctionnalitÃ©, y a-t-il des parties de ton unitÃ© de code qui ne sont pas concernÃ©es ? Si oui, split.

3ï¸âƒ£ Chaque mÃ©thode de ta classe ou fonctions de ton module contribue-t-elle Ã  la mÃªme responsabilitÃ© globale ? Si non, split encore.

---

## ğŸ› ï¸ Un bon Type-System t'aide pour appliquer le SRP :

1ï¸âƒ£ Des types et des interfaces claires : tu peux dÃ©finir et imposer des contrats clairs.

2ï¸âƒ£ Living documentation : les types agissent comme documentation (comme les tests), rendant les responsabilitÃ©s plus Ã©videntes pour toi et ton Ã©quipe.

3ï¸âƒ£ Erreurs de compilation : le compilo t'alerte si tu mÃ©langes les responsabilitÃ©s.

4ï¸âƒ£ Auto completion et Refactoring : les IDE aiment le typage, Ã§a les aide Ã  t'aider (et je ne parle pas des GenAI).

Est-ce que TypeScript est parfait ? SÃ»rement pas, mais il remplit bien son rÃ´le dans ce cas.

---

Exemples de code gÃ©nÃ©rÃ©s par Claude parce que je n'avais que mon tÃ©lÃ©phone de dispo.

Comment trouves-tu son refactoring ?
Un avis, un commentaire, un complÃ©ment ?
Partage ton point de vue ğŸ‘‡

---

Tu me dÃ©couvres ou me redÃ©couvres avec ce post ?

ğŸ› ï¸ Pendant tout le mois d'octobre, je publie un post par jour autour de NodeJS, TypeScript et d'Architecture Logicielle.

#SingleResponsibilityPrinciple #SoftwareArchitecture #OctoberChallenge
